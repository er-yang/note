# https

**对称加密**：指的就是加、解密使用的同是一串密钥，所以被称做对称加密

**非对称加密**：指的是加、解密使用不同的密钥，一把作为公开的公钥，另一把作为私钥。公钥加密的信息，只有私钥才能解密。反之，私钥加密的信息，只有公钥才能解密。 通讯双方交换自己的公钥，保留自己的私钥，双方用对方的公钥来加密给对方发送的信息，接收方在收到信息后，用自己的私钥来解密。

#### Tls & ssl





#### https握手过程

![TLSconnect](../../source/TLSconnect.png)

**https的信任是基于预装于操作系统中的证书颁发机构**

https 本质是使用TLS的http通信，TLS在tcp于http协议的中间；

 TLS握手过程

1. 客户端发起请求，并携带了自己支持的加密算法版本信息以及**随机数1**（用来生成密钥）
2. 服务端回复请求，并确认使用何种加密算法信息以及自己的**随机数2**、证书、以及公钥（存在于证书种）
3. 客户端用操作系统内置的证书认证机构验证证书，从证书种取出公钥，用公钥加密随机数，最终发送的内容包含
   * 用服务器公钥加密的**随机数3**
   * 编码改变通知，告诉服务器接下来发送的内容将加密发送
   * 客服端握手结束通知
4. 服务端收到后用私钥解密收到的随机数，并用这三个随机数生成对称密钥（客户端同理），最终回复内容包含
   * 编码改变通知，告诉客户端接下来发送的内容将加密发送
   * 服务端握手结束通知

至此握手结束,后续消息都将使用**对称密钥**进行对称加密传输，也解决了非对加密在加密算法过程上的消耗

为什么要使用随机数，而且还是三个；

```
"不管是客户端还是服务器，都需要随机数，这样生成的密钥才不会每次都一样。由于SSL协议中证书是静态的，因此十分有必要引入一种随机因素来保证协商出来的密钥的随机性。

对于RSA密钥交换算法来说，pre-master-key本身就是一个随机数，再加上hello消息中的随机，三个随机数通过一个密钥导出器最终导出一个对称密钥。

pre master的存在在于SSL协议不信任每个主机都能产生完全随机的随机数，如果随机数不随机，那么pre master secret就有可能被猜出来，那么仅适用pre master secret作为密钥就不合适了，因此必须引入新的随机因素，那么客户端和服务器加上pre master secret三个随机数一同生成的密钥就不容易被猜出了，一个伪随机可能完全不随机，可是是三个伪随机就十分接近随机了，每增加一个自由度，随机性增加的可不是一。"
```

